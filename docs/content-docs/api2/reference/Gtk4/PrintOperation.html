---
---
<!doctype html>
<html lang="en">
<head>
<title>Gnome::Gtk4::PrintOperation</title>
<meta charset="UTF-8" />

<link href="asset_files/images/favicon.ico" rel="icon" type="image/x-icon"/>
<link rel="stylesheet" type="text/css" href="asset_files/css/rakudoc-extra.css" />
<link rel="stylesheet" type="text/css" href="asset_files/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="asset_files/css/rakudoc-styling.css" />

</head>
	<body class="pod">
<header><img src="asset_files/images/gtk-raku.png" id="Camelia_bug"><h2 class="title" id="Gnome::Gtk4::PrintOperation">Gnome::Gtk4::PrintOperation</h2></header><div class="pod-content"><nav><div id="_TOC"><table>
<caption>Table of Contents</caption>
<tr class="toc-level-1"><td class="toc-text"><a href="#Description">Description</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#The_high-level_printing_API">The high-level printing API</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Class_initialization">Class initialization</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#new">new</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#:native-object">:native-object</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#new-printoperation">new-printoperation</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Methods">Methods</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#cancel">cancel</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#draw-page-finish">draw-page-finish</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-default-page-setup">get-default-page-setup</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-embed-page-setup">get-embed-page-setup</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-error">get-error</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-has-selection">get-has-selection</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-n-pages-to-print">get-n-pages-to-print</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-print-settings">get-print-settings</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-status">get-status</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-status-string">get-status-string</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-support-selection">get-support-selection</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#is-finished">is-finished</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#run">run</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-allow-async">set-allow-async</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-current-page">set-current-page</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-custom-tab-label">set-custom-tab-label</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-default-page-setup">set-default-page-setup</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-defer-drawing">set-defer-drawing</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-embed-page-setup">set-embed-page-setup</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-export-filename">set-export-filename</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-has-selection">set-has-selection</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-job-name">set-job-name</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-n-pages">set-n-pages</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-print-settings">set-print-settings</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-show-progress">set-show-progress</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-support-selection">set-support-selection</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-track-print-status">set-track-print-status</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-unit">set-unit</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-use-full-page">set-use-full-page</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Signals">Signals</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#begin-print">begin-print</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#create-custom-widget">create-custom-widget</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#custom-widget-apply">custom-widget-apply</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#done">done</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#draw-page">draw-page</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#end-print">end-print</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#paginate">paginate</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#preview">preview</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#request-page-setup">request-page-setup</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#status-changed">status-changed</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#update-custom-widget">update-custom-widget</a></td></tr>
</table></div>
</nav><div id=""></div><div class="pod-body">
<section name="___top">
<h1 id="Description"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">Description</a></h1>
<p><strong>Gnome::Gtk4::PrintOperation</strong> is the high-level, portable printing API.</p><p>It looks a bit different than other GTK dialogs such as the <strong>Gnome::Gtk4::R-FileChooser</strong>, since some platforms don’t expose enough infrastructure to implement a good print dialog. On such platforms, <strong>Gnome::Gtk4::PrintOperation</strong> uses the native print dialog. On platforms which do not provide a native print dialog, GTK uses its own, see <strong>Gnome::Gtk4::PrintUnixDialog</strong>.</p><p>The typical way to use the high-level printing API is to create a <strong>Gnome::Gtk4::PrintOperation</strong> object with <code>.newprintoperation()</code> when the user selects to print. Then you set some properties on it, e.g. the page size, any <strong>Gnome::Gtk4::PrintSettings</strong> from previous print operations, the number of pages, the current page, etc.</p><p>Then you start the print operation by calling <code>.run()</code>. It will then show a dialog, let the user select a printer and options. When the user finished the dialog, various signals will be emitted on the <strong>Gnome::Gtk4::PrintOperation</strong>, the main one being <em>draw-page</em>, which you are supposed to handle and render the page on the provided <strong>Gnome::Gtk4::PrintContext</strong> using Cairo.</p>
<h2 id="The_high-level_printing_API"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">The high-level printing API</a></h2>
<p>By default <strong>Gnome::Gtk4::PrintOperation</strong> uses an external application to do print preview. To implement a custom print preview, an application must connect to the preview signal. The functions <code>.render-page() in class Gnome::Gtk4::R-PrintOperationPreview</code>, <code>.end-preview() in class Gnome::Gtk4::R-PrintOperationPreview</code> and <code>.is-selected() in class Gnome::Gtk4::R-PrintOperationPreview</code> are useful when implementing a print preview.</p></section>
<section name="pod">
<h1 id="Class_initialization"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">Class initialization</a></h1>

<h2 id="new"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">new</a></h2>

<h3 id=":native-object"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">:native-object</a></h3>
<p>Create an object using a native object from elsewhere. See also <strong>Gnome::N::TopLevelSupportClass</strong>.</p><pre class="pod-block-code">multi method new ( N-Object :$native-object! )</pre></section>
<section name="pod">
<h2 id="new-printoperation"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">new-printoperation</a></h2>
<p>Creates a new <strong>Gnome::Gtk4::PrintOperation</strong>.</p><pre class="pod-block-code">method new-printoperation ( --&gt; Gnome::Gtk4::PrintOperation \)
</pre></section>
<section name="pod">
<h1 id="Methods"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">Methods</a></h1>
</section>
<section name="pod">
<h2 id="cancel"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">cancel</a></h2>
<p>Cancels a running print operation.</p><p>This function may be called from a <em>begin-print</em>, <em>paginate</em> or <em>draw-page</em> signal handler to stop the currently running print operation.</p><pre class="pod-block-code">method cancel ( )
</pre></section>
<section name="pod">
<h2 id="draw-page-finish"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">draw-page-finish</a></h2>
<p>Signal that drawing of particular page is complete.</p><p>It is called after completion of page drawing (e.g. drawing in another thread). If <code>.set-defer-drawing()</code> was called before, then this function has to be called by application. Otherwise it is called by GTK itself.</p><pre class="pod-block-code">method draw-page-finish ( )
</pre></section>
<section name="pod">
<h2 id="get-default-page-setup"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-default-page-setup</a></h2>
<p>Returns the default page setup.</p><pre class="pod-block-code">method get-default-page-setup (--&gt; N-Object )
</pre><p>Return value; the default page setup. </p></section>
<section name="pod">
<h2 id="get-embed-page-setup"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-embed-page-setup</a></h2>
<p>Gets whether page setup selection combos are embedded</p><pre class="pod-block-code">method get-embed-page-setup (--&gt; Bool )
</pre><p>Return value; whether page setup selection combos are embedded. </p></section>
<section name="pod">
<h2 id="get-error"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-error</a></h2>
<p>Call this when the result of a print operation is <code>GTK_PRINT_OPERATION_RESULT_ERROR</code>.</p><p>It can be called either after <code>.run()</code> returns, or in the <em>done</em> signal handler.</p><p>The returned <strong>Gnome::Glib::N-Error</strong> will contain more details on what went wrong.</p><pre class="pod-block-code">method get-error ( CArray[N-Error] $err )
</pre><ul>
<li><p>$err; Error object. When defined, an error can be returned when there is one. Use <code>Pointer</code> when you want to ignore the error. .</p></li>
</ul>
</section>
<section name="pod">
<h2 id="get-has-selection"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-has-selection</a></h2>
<p>Gets whether there is a selection.</p><pre class="pod-block-code">method get-has-selection (--&gt; Bool )
</pre><p>Return value; whether there is a selection. </p></section>
<section name="pod">
<h2 id="get-n-pages-to-print"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-n-pages-to-print</a></h2>
<p>Returns the number of pages that will be printed.</p><p>Note that this value is set during print preparation phase (<code>GTK_PRINT_STATUS_PREPARING</code>), so this function should never be called before the data generation phase (<code>GTK_PRINT_STATUS_GENERATING_DATA</code>). You can connect to the <em>status-changed</em> signal and call <code>.get-n-pages-to-print()</code> when print status is <code>GTK_PRINT_STATUS_GENERATING_DATA</code>.</p><p>This is typically used to track the progress of print operation.</p><pre class="pod-block-code">method get-n-pages-to-print (--&gt; Int )
</pre><p>Return value; the number of pages that will be printed. </p></section>
<section name="pod">
<h2 id="get-print-settings"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-print-settings</a></h2>
<p>Returns the current print settings.</p><p>Note that the return value is undefined until either <code>.set-print-settings()</code> or <code>.run()</code> have been called.</p><pre class="pod-block-code">method get-print-settings (--&gt; N-Object )
</pre><p>Return value; the current print settings of <code>$op</code>.. </p></section>
<section name="pod">
<h2 id="get-status"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-status</a></h2>
<p>Returns the status of the print operation.</p><p>Also see <code>.get-status-string()</code>.</p><pre class="pod-block-code">method get-status (--&gt; GtkPrintStatus )
</pre><p>Return value; the status of the print operation. </p></section>
<section name="pod">
<h2 id="get-status-string"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-status-string</a></h2>
<p>Returns a string representation of the status of the print operation.</p><p>The string is translated and suitable for displaying the print status e.g. in a <strong>Gnome::Gtk4::Statusbar</strong>.</p><p>Use <code>.get-status()</code> to obtain a status value that is suitable for programmatic use.</p><pre class="pod-block-code">method get-status-string (--&gt; Str )
</pre><p>Return value; a string representation of the status of the print operation. </p></section>
<section name="pod">
<h2 id="get-support-selection"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">get-support-selection</a></h2>
<p>Gets whether the application supports print of selection</p><pre class="pod-block-code">method get-support-selection (--&gt; Bool )
</pre><p>Return value; whether the application supports print of selection. </p></section>
<section name="pod">
<h2 id="is-finished"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">is-finished</a></h2>
<p>A convenience function to find out if the print operation is finished.</p><p>a print operation is finished if its status is either <code>GTK_PRINT_STATUS_FINISHED</code> or <code>GTK_PRINT_STATUS_FINISHED_ABORTED</code>.</p><p>Note: when you enable print status tracking the print operation can be in a non-finished state even after done has been called, as the operation status then tracks the print job status on the printer.</p><pre class="pod-block-code">method is-finished (--&gt; Bool )
</pre><p>Return value; <code>True</code>, if the print operation is finished.. </p></section>
<section name="pod">
<h2 id="run"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">run</a></h2>
<p>Runs the print operation.</p><p>Normally that this function does not return until the rendering of all pages is complete. You can connect to the <em>status-changed</em> signal on <code>$op</code> to obtain some information about the progress of the print operation.</p><p>Furthermore, it may use a recursive mainloop to show the print dialog.</p><p>If you set the [Gtk.PrintOperation:allow-async] property, the operation will run asynchronously if this is supported on the platform. The <em>done</em> signal will be emitted with the result of the operation when the it is done (i.e. when the dialog is canceled, or when the print succeeds or fails).</p><p>Note that <code>.run()</code> can only be called once on a given <strong>Gnome::Gtk4::PrintOperation</strong>.</p><pre class="pod-block-code">method run ( GtkPrintOperationAction $action, N-Object() $parent, CArray[N-Error] $err --&gt; GtkPrintOperationResult )
</pre><ul>
<li><p>$action; the action to start.</p></li>
<li><p>$parent; Transient parent of the dialog.</p></li>
<li><p>$err; Error object. When defined, an error can be returned when there is one. Use <code>Pointer</code> when you want to ignore the error. .</p></li>
</ul>
<p>Return value; the result of the print operation. A return value of <code>GTK_PRINT_OPERATION_RESULT_APPLY</code> indicates that the printing was completed successfully. In this case, it is a good idea to obtain the used print settings with <code>.get-print-settings()</code> and store them for reuse with the next print operation. A value of <code>GTK_PRINT_OPERATION_RESULT_IN_PROGRESS</code> means the operation is running asynchronously, and will emit the <em>done</em> signal when done.. </p></section>
<section name="pod">
<h2 id="set-allow-async"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-allow-async</a></h2>
<p>Sets whether <code>.run()</code> may return before the print operation is completed.</p><p>Note that some platforms may not allow asynchronous operation.</p><pre class="pod-block-code">method set-allow-async ( Bool() $allow-async )
</pre><ul>
<li><p>$allow-async; <code>True</code> to allow asynchronous operation.</p></li>
</ul>
</section>
<section name="pod">
<h2 id="set-current-page"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-current-page</a></h2>
<p>Sets the current page.</p><p>If this is called before <code>.run()</code>, the user will be able to select to print only the current page.</p><p>Note that this only makes sense for pre-paginated documents.</p><pre class="pod-block-code">method set-current-page ( Int() $current-page )
</pre><ul>
<li><p>$current-page; the current page, 0-based.</p></li>
</ul>
</section>
<section name="pod">
<h2 id="set-custom-tab-label"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-custom-tab-label</a></h2>
<p>Sets the label for the tab holding custom widgets.</p><pre class="pod-block-code">method set-custom-tab-label ( Str $label )
</pre><ul>
<li><p>$label; the label to use, or undefined to use the default label.</p></li>
</ul>
</section>
<section name="pod">
<h2 id="set-default-page-setup"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-default-page-setup</a></h2>
<p>Makes <code>$default-page-setup</code> the default page setup for <code>$op</code>.</p><p>This page setup will be used by <code>.run()</code>, but it can be overridden on a per-page basis by connecting to the <em>request-page-setup</em> signal.</p><pre class="pod-block-code">method set-default-page-setup ( N-Object() $default-page-setup )
</pre><ul>
<li><p>$default-page-setup; a <strong>Gnome::Gtk4::PageSetup</strong>.</p></li>
</ul>
</section>
<section name="pod">
<h2 id="set-defer-drawing"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-defer-drawing</a></h2>
<p>Sets up the <strong>Gnome::Gtk4::PrintOperation</strong> to wait for calling of <code>.draw-page-finish</code> from application.</p><p>This can be used for drawing page in another thread.</p><p>This function must be called in the callback of the <em>draw-page</em> signal.</p><pre class="pod-block-code">method set-defer-drawing ( )
</pre><p>----EXAMPLE----020</p></section>
<section name="pod">
<h2 id="set-embed-page-setup"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-embed-page-setup</a></h2>
<p>Embed page size combo box and orientation combo box into page setup page.</p><p>Selected page setup is stored as default page setup in <strong>Gnome::Gtk4::PrintOperation</strong>.</p><pre class="pod-block-code">method set-embed-page-setup ( Bool() $embed )
</pre><ul>
<li><p>$embed; <code>True</code> to embed page setup selection in the <strong>Gnome::Gtk4::PrintUnixDialog</strong>.</p></li>
</ul>
<p>----EXAMPLE----021</p></section>
<section name="pod">
<h2 id="set-export-filename"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-export-filename</a></h2>
<p>Sets up the <strong>Gnome::Gtk4::PrintOperation</strong> to generate a file instead of showing the print dialog.</p><p>The intended use of this function is for implementing “Export to PDF” actions. Currently, PDF is the only supported format.</p><p>“Print to PDF” support is independent of this and is done by letting the user pick the “Print to PDF” item from the list of printers in the print dialog.</p><pre class="pod-block-code">method set-export-filename ( Str $filename )
</pre><ul>
<li><p>$filename; the filename for the exported file.</p></li>
</ul>
<p>----EXAMPLE----022</p></section>
<section name="pod">
<h2 id="set-has-selection"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-has-selection</a></h2>
<p>Sets whether there is a selection to print.</p><p>Application has to set number of pages to which the selection will draw by <code>.set-n-pages()</code> in a handler for the <em>begin-print</em> signal.</p><pre class="pod-block-code">method set-has-selection ( Bool() $has-selection )
</pre><ul>
<li><p>$has-selection; <code>True</code> indicates that a selection exists.</p></li>
</ul>
<p>----EXAMPLE----023</p></section>
<section name="pod">
<h2 id="set-job-name"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-job-name</a></h2>
<p>Sets the name of the print job.</p><p>The name is used to identify the job (e.g. in monitoring applications like eggcups).</p><p>If you don’t set a job name, GTK picks a default one by numbering successive print jobs.</p><pre class="pod-block-code">method set-job-name ( Str $job-name )
</pre><ul>
<li><p>$job-name; a string that identifies the print job.</p></li>
</ul>
<p>----EXAMPLE----024</p></section>
<section name="pod">
<h2 id="set-n-pages"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-n-pages</a></h2>
<p>Sets the number of pages in the document.</p><p>This must be set to a positive number before the rendering starts. It may be set in a <em>begin-print</em> signal handler.</p><p>Note that the page numbers passed to the <em>request-page-setup</em> and <em>draw-page</em> signals are 0-based, i.e. if the user chooses to print all pages, the last <em>draw-page</em> signal will be for page <code>$n</code>-pages - 1.</p><pre class="pod-block-code">method set-n-pages ( Int() $n-pages )
</pre><ul>
<li><p>$n-pages; the number of pages.</p></li>
</ul>
<p>----EXAMPLE----025</p></section>
<section name="pod">
<h2 id="set-print-settings"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-print-settings</a></h2>
<p>Sets the print settings for <code>$op</code>.</p><p>This is typically used to re-establish print settings from a previous print operation, see <code>.run()</code>.</p><pre class="pod-block-code">method set-print-settings ( N-Object() $print-settings )
</pre><ul>
<li><p>$print-settings; <strong>Gnome::Gtk4::PrintSettings</strong>.</p></li>
</ul>
<p>----EXAMPLE----026</p></section>
<section name="pod">
<h2 id="set-show-progress"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-show-progress</a></h2>
<p>If <code>$show</code>-progress is <code>True</code>, the print operation will show a progress dialog during the print operation.</p><pre class="pod-block-code">method set-show-progress ( Bool() $show-progress )
</pre><ul>
<li><p>$show-progress; <code>True</code> to show a progress dialog.</p></li>
</ul>
<p>----EXAMPLE----027</p></section>
<section name="pod">
<h2 id="set-support-selection"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-support-selection</a></h2>
<p>Sets whether selection is supported by <strong>Gnome::Gtk4::PrintOperation</strong>.</p><pre class="pod-block-code">method set-support-selection ( Bool() $support-selection )
</pre><ul>
<li><p>$support-selection; <code>True</code> to support selection.</p></li>
</ul>
<p>----EXAMPLE----028</p></section>
<section name="pod">
<h2 id="set-track-print-status"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-track-print-status</a></h2>
<p>If track-status is <code>True</code>, the print operation will try to continue report on the status of the print job in the printer queues and printer.</p><p>This can allow your application to show things like “out of paper” issues, and when the print job actually reaches the printer.</p><p>This function is often implemented using some form of polling, so it should not be enabled unless needed.</p><pre class="pod-block-code">method set-track-print-status ( Bool() $track-status )
</pre><ul>
<li><p>$track-status; <code>True</code> to track status after printing.</p></li>
</ul>
<p>----EXAMPLE----029</p></section>
<section name="pod">
<h2 id="set-unit"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-unit</a></h2>
<p>Sets up the transformation for the cairo context obtained from <strong>Gnome::Gtk4::PrintContext</strong> in such a way that distances are measured in units of <code>$unit</code>.</p><pre class="pod-block-code">method set-unit ( GtkUnit $unit )
</pre><ul>
<li><p>$unit; the unit to use.</p></li>
</ul>
<p>----EXAMPLE----030</p></section>
<section name="pod">
<h2 id="set-use-full-page"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">set-use-full-page</a></h2>
<p>If <code>$full</code>-page is <code>True</code>, the transformation for the cairo context obtained from <strong>Gnome::Gtk4::PrintContext</strong> puts the origin at the top left corner of the page.</p><p>This may not be the top left corner of the sheet, depending on page orientation and the number of pages per sheet). Otherwise, the origin is at the top left corner of the imageable area (i.e. inside the margins).</p><pre class="pod-block-code">method set-use-full-page ( Bool() $full-page )
</pre><ul>
<li><p>$full-page; <code>True</code> to set up the <strong>Gnome::Gtk4::PrintContext</strong> for the full page.</p></li>
</ul>
<p>----EXAMPLE----031</p></section>
<section name="pod">
<h1 id="Signals"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">Signals</a></h1>

<h3 id="begin-print"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">begin-print</a></h3>
<p>Emitted after the user has finished changing print settings in the dialog, before the actual rendering starts.</p><p>A typical use for <em>begin-print</em> is to use the parameters from the <strong>Gnome::Gtk4::PrintContext</strong> and paginate the document accordingly, and then set the number of pages with <code>.set-n-pages()</code>.</p><pre class="pod-block-code">method handler (
  N-Object $context,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$context; the <strong>Gnome::Gtk4::PrintContext</strong> for the current operation.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="create-custom-widget"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">create-custom-widget</a></h3>
<p>Emitted when displaying the print dialog.</p><p>If you return a widget in a handler for this signal it will be added to a custom tab in the print dialog. You typically return a container widget with multiple widgets in it.</p><p>The print dialog owns the returned widget, and its lifetime is not controlled by the application. However, the widget is guaranteed to stay around until the <em>custom-widget-apply</em> signal is emitted on the operation. Then you can read out any information you need from the widgets.</p><pre class="pod-block-code">method handler (
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="custom-widget-apply"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">custom-widget-apply</a></h3>
<p>Emitted right before <em>begin-print</em> if you added a custom widget in the <em>create-custom-widget</em> handler.</p><p>When you get this signal you should read the information from the custom widgets, as the widgets are not guaranteed to be around at a later time.</p><pre class="pod-block-code">method handler (
  N-Object $widget,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$widget; the custom widget added in <em>create-custom-widget</em>.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="done"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">done</a></h3>
<p>Emitted when the print operation run has finished doing everything required for printing. <code>$result</code> gives you information about what happened during the run. If <code>$result</code> is <code>GTK_PRINT_OPERATION_RESULT_ERROR</code> then you can call <code>.get-error()</code> for more information.</p><p>If you enabled print status tracking then <code>.is-finished()</code> may still return <code>False</code> after the <em>done</em> signal was emitted.</p><pre class="pod-block-code">method handler (
   $result,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$result; the result of the print operation.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="draw-page"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">draw-page</a></h3>
<p>Emitted for every page that is printed.</p><p>The signal handler must render the <code>$page-nr</code>'s page onto the cairo context obtained from <code>$context</code> using <code>.get-cairo-context() in class Gnome::Gtk4::PrintContext</code>.</p><p>Use <code>.set-use-full-page()</code> and <code>.set-unit()</code> before starting the print operation to set up the transformation of the cairo context according to your needs.</p><pre class="pod-block-code">method handler (
  N-Object $context,
  gint $page-nr,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$context; the <strong>Gnome::Gtk4::PrintContext</strong> for the current operation.</p></li>
<li><p>$page-nr; the number of the currently printed page (0-based).</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="end-print"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">end-print</a></h3>
<p>Emitted after all pages have been rendered.</p><p>A handler for this signal can clean up any resources that have been allocated in the <em>begin-print</em> handler.</p><pre class="pod-block-code">method handler (
  N-Object $context,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$context; the <strong>Gnome::Gtk4::PrintContext</strong> for the current operation.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="paginate"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">paginate</a></h3>
<p>Emitted after the <em>begin-print</em> signal, but before the actual rendering starts.</p><p>It keeps getting emitted until a connected signal handler returns <code>True</code>.</p><p>The <em>paginate</em> signal is intended to be used for paginating a document in small chunks, to avoid blocking the user interface for a long time. The signal handler should update the number of pages using <code>.set-n-pages()</code>, and return <code>True</code> if the document has been completely paginated.</p><p>If you don't need to do pagination in chunks, you can simply do it all in the <em>begin-print</em> handler, and set the number of pages from there.</p><pre class="pod-block-code">method handler (
  N-Object $context,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
  --&gt; gboolean
)
</pre><ul>
<li><p>$context; the <strong>Gnome::Gtk4::PrintContext</strong> for the current operation.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>
<p>Return value; <code>True</code> if pagination is complete</p>
<h3 id="preview"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">preview</a></h3>
<p>Gets emitted when a preview is requested from the native dialog.</p><p>The default handler for this signal uses an external viewer application to preview.</p><p>To implement a custom print preview, an application must return <code>True</code> from its handler for this signal. In order to use the provided <code>$context</code> for the preview implementation, it must be given a suitable cairo context with <code>.set-cairo-context() in class Gnome::Gtk4::PrintContext</code>.</p><p>The custom preview implementation can use <code>.is-selected() in class Gnome::Gtk4::R-PrintOperationPreview</code> and <code>.render-page() in class Gnome::Gtk4::R-PrintOperationPreview</code> to find pages which are selected for print and render them. The preview must be finished by calling <code>.end-preview() in class Gnome::Gtk4::R-PrintOperationPreview</code> (typically in response to the user clicking a close button).</p><pre class="pod-block-code">method handler (
  N-Object $preview,
  N-Object $context,
  N-Object $parent,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
  --&gt; gboolean
)
</pre><ul>
<li><p>$preview; the <strong>Gnome::Gtk4::R-PrintOperationPreview</strong> for the current operation.</p></li>
<li><p>$context; the <strong>Gnome::Gtk4::PrintContext</strong> that will be used.</p></li>
<li><p>$parent; the <strong>Gnome::Gtk4::Window</strong> to use as window parent.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>
<p>Return value; <code>True</code> if the listener wants to take over control of the preview</p>
<h3 id="request-page-setup"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">request-page-setup</a></h3>
<p>Emitted once for every page that is printed.</p><p>This gives the application a chance to modify the page setup. Any changes done to <code>$setup</code> will be in force only for printing this page.</p><pre class="pod-block-code">method handler (
  N-Object $context,
  gint $page-nr,
  N-Object $setup,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$context; the <strong>Gnome::Gtk4::PrintContext</strong> for the current operation.</p></li>
<li><p>$page-nr; the number of the currently printed page (0-based).</p></li>
<li><p>$setup; the <strong>Gnome::Gtk4::PageSetup</strong>.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="status-changed"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">status-changed</a></h3>
<p>Emitted at between the various phases of the print operation.</p><p>See <code>enumeration PrintStatus from Gnome::Gtk4::T-printoperation</code> for the phases that are being discriminated. Use <code>.get-status()</code> to find out the current status.</p><pre class="pod-block-code">method handler (
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="update-custom-widget"><a href="#Gnome::Gtk4::PrintOperation" class="u" title="go to top of document">update-custom-widget</a></h3>
<p>Emitted after change of selected printer.</p><p>The actual page setup and print settings are passed to the custom widget, which can actualize itself according to this change.</p><pre class="pod-block-code">method handler (
  N-Object $widget,
  N-Object $setup,
  N-Object $settings,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::PrintOperation :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$widget; the custom widget added in <em>create-custom-widget</em>.</p></li>
<li><p>$setup; actual page setup.</p></li>
<li><p>$settings; actual print settings.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::PrintOperation</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>
</section>		</div>
</div><footer><div>Rendered from <span class="path">/home/marcel/Languages/Raku/Projects/gnome-source-skim-tool/gnome-api2/gnome-gtk4/doc/PrintOperation.rakudoc</span></div><div>at <span class="time">2024-12-02T20:16:01Z</span></div></footer>
	</body>
</html>
