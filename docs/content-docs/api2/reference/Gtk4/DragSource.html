---
---
<!doctype html>
<html lang="en">
<head>
<title>Gnome::Gtk4::DragSource</title>
<meta charset="UTF-8" />

<link href="asset_files/images/favicon.ico" rel="icon" type="image/x-icon"/>
<link rel="stylesheet" type="text/css" href="asset_files/css/rakudoc-extra.css" />
<link rel="stylesheet" type="text/css" href="asset_files/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="asset_files/css/rakudoc-styling.css" />

</head>
	<body class="pod">
<header><img src="asset_files/images/gtk-raku.png" id="Camelia_bug"><h2 class="title" id="Gnome::Gtk4::DragSource">Gnome::Gtk4::DragSource</h2></header><div class="pod-content"><nav><div id="_TOC"><table>
<caption>Table of Contents</caption>
<tr class="toc-level-1"><td class="toc-text"><a href="#Description">Description</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Class_initialization">Class initialization</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#new">new</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#:native-object">:native-object</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#new-dragsource">new-dragsource</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Methods">Methods</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#drag-cancel">drag-cancel</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-actions">get-actions</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-content">get-content</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#get-drag">get-drag</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-actions">set-actions</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-content">set-content</a></td></tr>
 <tr class="toc-level-2"><td class="toc-text"><a href="#set-icon">set-icon</a></td></tr>
 <tr class="toc-level-1"><td class="toc-text"><a href="#Signals">Signals</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#drag-begin">drag-begin</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#drag-cancel_0">drag-cancel</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#drag-end">drag-end</a></td></tr>
 <tr class="toc-level-3"><td class="toc-text"><a href="#prepare">prepare</a></td></tr>
</table></div>
</nav><div id=""></div><div class="pod-body">
<section name="___top">
<h1 id="Description"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">Description</a></h1>
<p><strong>Gnome::Gtk4::DragSource</strong> is an event controller to initiate Drag-And-Drop operations.</p><p><strong>Gnome::Gtk4::DragSource</strong> can be set up with the necessary ingredients for a DND operation ahead of time. This includes the source for the data that is being transferred, in the form of a <strong>Gnome::Gdk4::ContentProvider</strong>, the desired action, and the icon to use during the drag operation. After setting it up, the drag source must be added to a widget as an event controller, using <code>.add-controller() in class Gnome::Gtk4::Widget</code>.</p><p>Setting up the content provider and icon ahead of time only makes sense when the data does not change. More commonly, you will want to set them up just in time. To do so, <strong>Gnome::Gtk4::DragSource</strong> has <em>prepare</em> and <em>drag-begin</em> signals.</p><p>The <em>prepare</em> signal is emitted before a drag is started, and can be used to set the content provider and actions that the drag should be started with.</p><p>The <em>drag-begin</em> signal is emitted after the <strong>Gnome::Gdk4::Drag</strong> object has been created, and can be used to set up the drag icon.</p><p>During the DND operation, <strong>Gnome::Gtk4::DragSource</strong> emits signals that can be used to obtain updates about the status of the operation, but it is not normally necessary to connect to any signals, except for one case: when the supported actions include <code>GDK_ACTION_MOVE</code>, you need to listen for the <em>drag-end</em> signal and delete the data after it has been transferred.</p></section>
<section name="pod">
<h1 id="Class_initialization"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">Class initialization</a></h1>

<h2 id="new"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">new</a></h2>

<h3 id=":native-object"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">:native-object</a></h3>
<p>Create an object using a native object from elsewhere. See also <strong>Gnome::N::TopLevelSupportClass</strong>.</p><pre class="pod-block-code">multi method new ( N-Object :$native-object! )</pre></section>
<section name="pod">
<h2 id="new-dragsource"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">new-dragsource</a></h2>
<p>Creates a new <strong>Gnome::Gtk4::DragSource</strong> object.</p><pre class="pod-block-code">method new-dragsource ( --&gt; Gnome::Gtk4::DragSource \)
</pre></section>
<section name="pod">
<h1 id="Methods"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">Methods</a></h1>
</section>
<section name="pod">
<h2 id="drag-cancel"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">drag-cancel</a></h2>
<p>Cancels a currently ongoing drag operation.</p><pre class="pod-block-code">method drag-cancel ( )
</pre></section>
<section name="pod">
<h2 id="get-actions"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">get-actions</a></h2>
<p>Gets the actions that are currently set on the <strong>Gnome::Gtk4::DragSource</strong>.</p><pre class="pod-block-code">method get-actions (--&gt; UInt )
</pre><p>Return value; the actions set on <code>$source</code>. </p></section>
<section name="pod">
<h2 id="get-content"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">get-content</a></h2>
<p>Gets the current content provider of a <strong>Gnome::Gtk4::DragSource</strong>.</p><pre class="pod-block-code">method get-content (--&gt; N-Object )
</pre><p>Return value; the <strong>Gnome::Gdk4::ContentProvider</strong> of <code>$source</code>. </p></section>
<section name="pod">
<h2 id="get-drag"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">get-drag</a></h2>
<p>Returns the underlying <strong>Gnome::Gdk4::Drag</strong> object for an ongoing drag.</p><pre class="pod-block-code">method get-drag (--&gt; N-Object )
</pre><p>Return value; the <strong>Gnome::Gdk4::Drag</strong> of the current drag operation. </p></section>
<section name="pod">
<h2 id="set-actions"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">set-actions</a></h2>
<p>Sets the actions on the <strong>Gnome::Gtk4::DragSource</strong>.</p><p>During a DND operation, the actions are offered to potential drop targets. If <code>$actions</code> include <code>GDK_ACTION_MOVE</code>, you need to listen to the <em>drag-end</em> signal and handle <code>$delete-data</code> being <code>True</code>.</p><p>This function can be called before a drag is started, or in a handler for the <em>prepare</em> signal.</p><pre class="pod-block-code">method set-actions ( UInt $actions )
</pre><ul>
<li><p>$actions; the actions to offer.</p></li>
</ul>
</section>
<section name="pod">
<h2 id="set-content"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">set-content</a></h2>
<p>Sets a content provider on a <strong>Gnome::Gtk4::DragSource</strong>.</p><p>When the data is requested in the cause of a DND operation, it will be obtained from the content provider.</p><p>This function can be called before a drag is started, or in a handler for the <em>prepare</em> signal.</p><p>You may consider setting the content provider back to undefined in a <em>drag-end</em> signal handler.</p><pre class="pod-block-code">method set-content ( N-Object() $content )
</pre><ul>
<li><p>$content; a <strong>Gnome::Gdk4::ContentProvider</strong>.</p></li>
</ul>
</section>
<section name="pod">
<h2 id="set-icon"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">set-icon</a></h2>
<p>Sets a paintable to use as icon during DND operations.</p><p>The hotspot coordinates determine the point on the icon that gets aligned with the hotspot of the cursor.</p><p>If <code>$paintable</code> is undefined, a default icon is used.</p><p>This function can be called before a drag is started, or in a <em>prepare</em> or <em>drag-begin</em> signal handler.</p><pre class="pod-block-code">method set-icon ( N-Object() $paintable, Int() $hot-x, Int() $hot-y )
</pre><ul>
<li><p>$paintable; the <strong>Gnome::Gdk4::R-Paintable</strong> to use as icon.</p></li>
<li><p>$hot-x; the hotspot X coordinate on the icon.</p></li>
<li><p>$hot-y; the hotspot Y coordinate on the icon.</p></li>
</ul>
</section>
<section name="pod">
<h1 id="Signals"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">Signals</a></h1>

<h3 id="drag-begin"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">drag-begin</a></h3>
<p>Emitted on the drag source when a drag is started.</p><p>It can be used to e.g. set a custom drag icon with <code>.set-icon()</code>.</p><pre class="pod-block-code">method handler (
   $drag,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::DragSource :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$drag; the <strong>Gnome::Gdk4::Drag</strong> object.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::DragSource</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="drag-cancel_0"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">drag-cancel</a></h3>
<p>Emitted on the drag source when a drag has failed.</p><p>The signal handler may handle a failed drag operation based on the type of error. It should return <code>True</code> if the failure has been handled and the default &quot;drag operation failed&quot; animation should not be shown.</p><pre class="pod-block-code">method handler (
   $drag,
   $reason,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::DragSource :$_widget,
  *C&lt;user&gt;-options
  --&gt; gboolean
)
</pre><ul>
<li><p>$drag; the <strong>Gnome::Gdk4::Drag</strong> object.</p></li>
<li><p>$reason; information on why the drag failed.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::DragSource</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>
<p>Return value; <code>True</code> if the failed drag operation has been already handled</p>
<h3 id="drag-end"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">drag-end</a></h3>
<p>Emitted on the drag source when a drag is finished.</p><p>A typical reason to connect to this signal is to undo things done in <em>prepare</em> or <em>drag-begin</em> handlers.</p><pre class="pod-block-code">method handler (
   $drag,
  gboolean $delete-data,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::DragSource :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$drag; the <strong>Gnome::Gdk4::Drag</strong> object.</p></li>
<li><p>$delete-data; <code>True</code> if the drag was performing <code>GDK_ACTION_MOVE</code>, and the data should be deleted.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::DragSource</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>

<h3 id="prepare"><a href="#Gnome::Gtk4::DragSource" class="u" title="go to top of document">prepare</a></h3>
<p>Emitted when a drag is about to be initiated.</p><p>It returns the <strong>Gnome::Gdk4::ContentProvider</strong> to use for the drag that is about to start. The default handler for this signal returns the value of the <em>content</em> property, so if you set up that property ahead of time, you don't need to connect to this signal.</p><pre class="pod-block-code">method handler (
  gdouble $x,
  gdouble $y,
  Int :$_handle_id,
  N-GObject :$_native-object,
  Gnome::Gtk4::DragSource :$_widget,
  *C&lt;user&gt;-options
)
</pre><ul>
<li><p>$x; the X coordinate of the drag starting point.</p></li>
<li><p>$y; the Y coordinate of the drag starting point.</p></li>
<li><p>$_handle_id; The registered event handler id.</p></li>
<li><p>$_native-object; The native object provided by the Raku object which registered this event. This a native <strong>Gnome::Gtk4::DragSource</strong> object.</p></li>
<li><p>$_widget; The object which registered the signal. User code may have left the object going out of scope.</p></li>
<li><p><code>user</code>-options; A list of named arguments provided at the <code>.register-signal()</code> method from <strong>Gnome::GObject::Object</strong>.</p></li>
</ul>
</section>		</div>
</div><footer><div>Rendered from <span class="path">/home/marcel/Languages/Raku/Projects/gnome-source-skim-tool/gnome-api2/gnome-gtk4/doc/DragSource.rakudoc</span></div><div>at <span class="time">2024-12-02T20:09:52Z</span></div></footer>
	</body>
</html>
